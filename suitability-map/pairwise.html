<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fuzzy AHP Pairwise Comparison</title>
<style>
  body { font-family: sans-serif; padding: 2rem; background: #f5f7fa; color: #333; }
  table { border-collapse: collapse; width: 100%; margin-bottom: 1.5rem; }
  th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: center; }
  th { background: #007acc; color: #fff; }
  td:first-child, td:last-child { text-align: left; font-weight: 500; }
  select { padding: 0.2rem; }
  button { padding: 0.5rem 1rem; background: #007acc; color: #fff; border: none; cursor: pointer; border-radius: 4px; }
  button:hover { background: #005fa3; }
  #results { background: #fff; padding: 1rem; border-radius: 4px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<h1>Fuzzy AHP Pairwise Comparison</h1>

<table id="pairwiseTable">
  <thead>
    <tr><th>Variable A</th><th>Comparison</th><th>Variable B</th></tr>
  </thead>
  <tbody></tbody>
</table>

<button id="computeBtn">Compute Normalized Weights</button>

<div id="results"><p>Weights will appear here.</p></div>

<script>
// --- Variables & TFNs ---
const variables = [
  "Logistics", 
  "Energy Cost", 
  "Energy Carbon Intensity", 
  "Proximity to Acid Disposal", 
  "Oceanic Conditions", 
  "Potential for Brine", 
  "Distance from the Coast"
];

// TFN mapping for Saaty scale (1-9, 1: extremely less, 9: equal, adjust as needed)
const saatyTFN = {
  1: [1,1,1],
  2: [1,2,3],
  3: [2,3,4],
  4: [3,4,5],
  5: [4,5,6],
  6: [5,6,7],
  7: [6,7,8],
  8: [7,8,9],
  9: [9,9,9]
};

// --- generate pairwise table ---
const tbody = document.querySelector('#pairwiseTable tbody');
for(let i=0;i<variables.length;i++){
  for(let j=i+1;j<variables.length;j++){
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${variables[i]}</td>
      <td>
        <select>
          ${Object.keys(saatyTFN).map(k => `<option value="${k}" ${k==9?'selected':''}>${k}</option>`).join('')}
        </select>
      </td>
      <td>${variables[j]}</td>
    `;
    tbody.appendChild(tr);
  }
}

// --- fuzzy arithmetic helpers ---
function multiplyTFN(a,b){ return [a[0]*b[0], a[1]*b[1], a[2]*b[2]]; }
function reciprocalTFN(a){ return [1/a[2],1/a[1],1/a[0]]; }
function defuzzify(a){ return (a[0]+a[1]+a[2])/3; }

// --- compute weights ---
document.getElementById('computeBtn').addEventListener('click',()=>{
  const n = variables.length;
  const matrix = Array.from({length:n},()=>Array(n).fill([1,1,1]));
  const rows = Array.from(document.querySelectorAll('#pairwiseTable tbody tr'));
  let k=0;
  for(let i=0;i<n;i++){
    for(let j=i+1;j<n;j++){
      const val = parseInt(rows[k].querySelector('select').value);
      const tfn = saatyTFN[val];
      matrix[i][j] = tfn;
      matrix[j][i] = reciprocalTFN(tfn);
      k++;
    }
  }

  // --- defuzzify each row sum and normalize ---
  const rowSums = matrix.map(row => row.reduce((a,b)=>a+defuzzify(b),0));
  const total = rowSums.reduce((a,b)=>a+b,0);
  const weights = rowSums.map(s=>s/total);

  // display
  let html = '<h3>Normalized Weights</h3><ul>';
  variables.forEach((v,i)=>html+=`<li>${v}: ${(weights[i]*100).toFixed(1)}%</li>`);
  html+='</ul>';
  document.getElementById('results').innerHTML = html;
});
</script>

</body>
</html>
